<div class="commissions-container">
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Mes Commissions</h1>
      <p class="page-subtitle">G√©rez vos commissions de recrutement</p>
    </div>
    <div class="header-stats">
      <div class="stat-card">
        <span class="stat-number">{{ commissions.length }}</span>
        <span class="stat-label">Commission(s)</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{{ getActiveCommissionsCount() }}</span>
        <span class="stat-label">Active(s)</span>
      </div>
    </div>
  </div>

  <!-- Bouton de cr√©ation -->
  <div class="create-section">
    <button class="btn-create" (click)="createNewCommission()">
      <svg class="icon-btn" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="10" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <line x1="12" y1="8" x2="12" y2="16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        <line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </svg>
      Cr√©er une commission
    </button>
  </div>

  <!-- √âtat de chargement -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Chargement de vos commissions...</p>
  </div>

  <!-- Message d'erreur -->
  <div *ngIf="errorMessage && !isLoading" class="error-state">
    <p>{{ errorMessage }}</p>
    <button class="btn-retry" (click)="loadCommissions()">R√©essayer</button>
  </div>

  <!-- Liste des commissions -->
  <div *ngIf="!isLoading && !errorMessage" class="commissions-grid">
    <!-- Message si aucune commission -->
    <div *ngIf="commissions.length === 0" class="empty-state">
<!--      <div class="empty-icon">üë•</div>-->
      <h2>Aucune commission pour le moment</h2>
      <p>Cr√©ez votre premi√®re commission de recrutement.</p>
      <button class="btn-create-empty" (click)="createNewCommission()">
        <svg class="icon-btn" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          <line x1="12" y1="8" x2="12" y2="16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          <line x1="8" y1="12" x2="16" y2="12" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
        </svg>
        Cr√©er la premi√®re commission
      </button>
    </div>

    <!-- Cartes de commissions -->
    <div class="commission-card" *ngFor="let commission of commissions" (click)="goToCommissionDetail(commission.id)">
      <div class="card-header">
        <div class="commission-info">
          <h2 class="commission-name">{{ commission.name }}</h2>
          <div class="commission-meta">
            <span class="meta-item">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="2" y="7" width="20" height="14" rx="2" ry="2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
              </svg>
              {{ commission.jobOfferTitle || 'Non assign√©e' }}
            </span>
            <span class="meta-item">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <circle cx="9" cy="7" r="4" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
              </svg>
              {{ commission.memberCount || 0 }} membre(s)
            </span>
          </div>
        </div>
        <span class="status-badge" [ngClass]="'status-' + (commission.status || 'active').toLowerCase()">
          {{ getStatusLabel(commission.status) }}
        </span>
      </div>

      <div class="card-body">
        <div class="info-row">
          <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
            <circle cx="8.5" cy="7" r="4" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
            <line x1="20" y1="8" x2="20" y2="14" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
            <line x1="23" y1="11" x2="17" y2="11" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          </svg>
          <span class="info-label">Pr√©sident</span>
          <span class="info-value">{{ commission.presidentName || '‚Äî' }}</span>
        </div>
        <div class="info-row">
          <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          </svg>
          <span class="info-label">Cr√©√©e le</span>
          <span class="info-value">{{ formatDate(commission.createdAt) }}</span>
        </div>
        <div class="info-row" *ngIf="commission.jobOfferId">
          <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          </svg>
          <span class="info-label">ID Offre</span>
          <span class="info-value">#{{ commission.jobOfferId }}</span>
        </div>
      </div>

      <div class="card-footer">
        <button class="btn-secondary" (click)="editCommission(commission, $event)">
          <svg class="icon-btn" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          </svg>
          Modifier
        </button>
        <button class="btn-danger" (click)="deleteCommission(commission, $event)">
          <svg class="icon-btn" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
          </svg>
          Supprimer
        </button>
      </div>
    </div>
  </div>
</div>
